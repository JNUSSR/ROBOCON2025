# camera_yolo 视觉识别模块

本目录为ROBOCON 2025“飞身上篮”项目**投篮视觉识别与距离估算**相关代码及文档。主要功能为：  
- 使用博升100R深度相机采集画面和深度信息  
- 利用YOLO目标检测算法识别篮筐/篮球  
- 结合深度图求解目标物体距离，为投球速度等参数提供依据

---

## 目录结构（示例，实际情况先提交上来我看一下）

```plaintext
camera_yolo/
├── src/               # 主要代码文件（推理、识别、后处理等）
│   ├── yolo_detect.py
│   ├── depth_process.py
│   └── ... 
├── models/            # 训练好的YOLO模型权重文件
├── test_data/         # 测试图片/视频或小数据集
├── utils/             # 公共函数与工具脚本
├── requirements.txt   # Python依赖
└── README.md          # 本说明文件
```

---

## 主要功能

* **YOLO目标检测**
  检测篮筐、篮球等目标，返回边框坐标与类别。
* **深度信息处理**
  调用深度相机API，获取目标区域的深度图，统计平均/中值深度作为距离估计。
* **目标距离与投篮参数解算**
  根据识别出的目标距离，自动计算所需的投篮初速度等，并将参数输出给下位机或主控系统。

---

## 环境配置（这块由你们来写，这里只是给出格式）

1. 推荐环境：Python 3.8+
2. 安装依赖（首次使用时）：

```bash
pip install -r requirements.txt
```

3. 深度相机SDK按硬件型号单独安装（如博升100R官方驱动）

---

## 文件说明（这块由你们来写，这里只是给出格式）

* `src/yolo_detect.py`
  YOLO模型推理与目标检测主脚本
* `src/depth_process.py`
  负责处理相机深度数据，包含区域均值计算、异常值剔除等
* `src/target_solver.py`
  投篮参数解算/距离-速度转换逻辑
* `models/`
  存放YOLOv5/yolox等模型权重文件，如`best.pt`
* `test_data/`
  存放用于单元测试、调试的图片和视频数据
* `utils/`
  公共函数（如图像坐标系变换、日志模块、性能计时等）

---

## 示例运行（这块由你们来写，这里只是给出格式）

```bash
python src/yolo_detect.py --input test_data/test1.jpg --model models/basketball.pt
```

或摄像头实时识别（伪代码，实际按实现修改）：

```bash
python src/yolo_detect.py --camera 0 --model models/basketball.pt
```

---

## 接口说明（这块由你们来写，这里只是给出格式）

* **主输出**

  * 目标类别与像素坐标（x1, y1, x2, y2）
  * 目标深度均值（单位：米）
  * 推荐投篮速度/角度等参数

* **典型调用流程**

  1. 采集一帧彩色图 + 同步深度图
  2. YOLO检测目标
  3. 取目标框内深度区域，计算平均距离
  4. 调用参数解算，输出结果给主控（可本地显示或通过ROS/串口发送）

---

## 代码规范与贡献约定

* 所有新增/修改代码须添加作者及修改日期
* 新增功能或修复bug请及时更新本README或在对应模块下补充说明
* 提交前请使用`test_data`下的测试数据进行验证

---

## 负责人

* 视觉组组长：古振阳
* 组内成员请在此处补充

---

## FAQ与常见问题（这块由你们来写，这里只是给出格式）

* **深度相机出现丢帧？**
  检查USB带宽、电源、驱动是否正常，调整分辨率尝试
* **YOLO识别慢？**
  优先采用GPU推理，或简化模型（如YOLOv5n/s）
* **目标距离波动大？**
  可在深度处理时加滤波（如滑动均值、排除极端值）

---

如有更多问题，请联系组长或在项目主仓库 issues 区留言。

---

```

---
